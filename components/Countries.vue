<template>
  <div class="md:px-10 px-5 w-full md:h-600px overflow-y-scroll countries-scroll">
    <h1 class="md:text-4xl bg-white text-xl font-semibold pt-8 md:pt-0 sticky top-0 z-50">
      {{countries.length}} Countries
    </h1>
    <div class="flex justify-between items-center pt-6 relative z-20">
      <button
        type="button"
        class="flex items-center text-variant3 text-sm space-x-3 py-3 px-6 rounded-full border border-googlegrey hover:bg-appblue hover:bg-opacity-5 hover:text-appblue hover:border-white"
        @click="isFilter = !isFilter"
        @blur="isFilter = false"
      >
        <svg
          class="fill-current"
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path d="M2.5 4.375C2.5 4.20924 2.56585 4.05027 2.68306 3.93306C2.80027 3.81585 2.95924 3.75 3.125 3.75H16.875C17.0408 3.75 17.1997 3.81585 17.3169 3.93306C17.4342 4.05027 17.5 4.20924 17.5 4.375C17.5 4.54076 17.4342 4.69973 17.3169 4.81694C17.1997 4.93415 17.0408 5 16.875 5H3.125C2.95924 5 2.80027 4.93415 2.68306 4.81694C2.56585 4.69973 2.5 4.54076 2.5 4.375ZM5 9.375C5 9.20924 5.06585 9.05027 5.18306 8.93306C5.30027 8.81585 5.45924 8.75 5.625 8.75H14.375C14.5408 8.75 14.6997 8.81585 14.8169 8.93306C14.9342 9.05027 15 9.20924 15 9.375C15 9.54076 14.9342 9.69973 14.8169 9.81694C14.6997 9.93415 14.5408 10 14.375 10H5.625C5.45924 10 5.30027 9.93415 5.18306 9.81694C5.06585 9.69973 5 9.54076 5 9.375ZM7.5 14.375C7.5 14.2092 7.56585 14.0503 7.68306 13.9331C7.80027 13.8158 7.95924 13.75 8.125 13.75H11.875C12.0408 13.75 12.1997 13.8158 12.3169 13.9331C12.4342 14.0503 12.5 14.2092 12.5 14.375C12.5 14.5408 12.4342 14.6997 12.3169 14.8169C12.1997 14.9342 12.0408 15 11.875 15H8.125C7.95924 15 7.80027 14.9342 7.68306 14.8169C7.56585 14.6997 7.5 14.5408 7.5 14.375Z" />
        </svg>
        <span>Filters</span>
      </button>
      <div v-if="isFilter" class="absolute bg-white shadow rounded-lg md:w-250px top-20 z-30">
        <button
        v-for="(region, index) in regions"
        :key="index"
        :value="region.name"
        type="button"
        class="flex w-full py-2 px-4 justify-between text-variant3 items-center hover:bg-appblue hover:bg-opacity-5 hover:text-appblue"
        @click="$store.dispatch('setRegion', region.name)"
        >
          <span class="flex space-x-2 items-center">
            <svg
              class="fill-current"
              width="20"
              height="20"
              viewBox="0 0 20 20"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path d="M10 0C4.47733 0 0 4.47733 0 10L0.000333309 10.0177L0 10.0353C0 15.5387 4.45233 20 9.945 20L9.96633 19.9993L10 20C15.5227 20 20 15.5227 20 10C20 4.47733 15.5227 0 10 0ZM19.3333 10C19.3333 10.798 19.2327 11.5723 19.0447 12.3113C18.9577 12.2513 18.7277 12.4993 18.671 12.1707C18.6 11.7627 18.14 11.4793 17.8923 11.6743C17.6447 11.8693 16.937 12.4363 16.902 12.791C16.8663 13.1453 16.5653 13.5707 16.4243 13.27C16.2823 12.9687 15.8583 12.029 15.8757 11.781C15.893 11.533 15.6803 11.8697 15.363 11.3733C15.0443 10.877 14.496 11.302 14.0537 11.054C13.6113 10.8057 13.116 10.469 12.868 10.363C12.621 10.2563 13.3103 11.3553 13.399 11.2137C13.488 11.072 13.8413 11.32 13.9477 11.32C14.054 11.32 14.3367 11.568 14.16 11.7987C13.9833 12.0293 12.409 12.9873 12.2497 12.738C12.0897 12.4887 11.153 10.5577 10.9933 10.676C10.834 10.7943 11.9843 12.8087 12.179 12.9327C12.373 13.057 12.9573 12.9507 13.24 12.8267C13.5233 12.7027 12.6563 14.2093 12.2853 14.3867C11.914 14.5637 11.6133 15.1133 11.772 15.3613C11.9313 15.6093 11.949 16.549 11.6133 16.6733C11.2767 16.797 11.153 16.992 11.259 17.2227C11.3647 17.4527 11.0117 17.8423 10.8523 18.0907C10.6927 18.3387 10.074 18.8527 10.0207 18.9947C9.968 19.1367 9.20733 19.101 8.906 19.101C8.60567 19.101 8.83533 18.7287 8.79967 18.41C8.765 18.0907 8.49967 17.7893 8.49967 17.63C8.49967 17.4703 8.41067 17.098 8.28733 16.921C8.16367 16.7433 8.12767 16.4067 8.25167 16.212C8.376 16.0167 8.464 15.45 8.217 15.2017C7.969 14.9537 7.68567 14.528 7.88067 14.1913C8.07533 13.8547 7.66833 13.8903 7.33233 13.7303C6.996 13.5707 6.306 13.7837 5.95233 13.837C5.59833 13.89 5.245 13.7483 5.13867 13.5707C5.03267 13.3937 4.80267 12.9507 4.567 12.844C4.332 12.738 4.46667 12.277 4.608 12.1C4.75 11.923 4.46667 11.586 4.608 11.4437C4.75 11.302 4.838 10.7883 5.121 10.676C5.40433 10.564 5.351 10.487 5.35967 10.221C5.36867 9.955 5.678 9.955 5.73067 9.81333C5.784 9.67133 5.943 9.60067 6.26233 9.60067C6.58067 9.60067 7.11967 9.41433 7.37633 9.35233C7.633 9.29033 8.07533 9.20167 8.03967 9.45C8.00433 9.698 8.01333 9.98133 8.181 9.98133C8.34933 9.98133 8.57933 10.079 8.84467 10.2443C9.11 10.4093 9.11867 10.2743 9.15433 10.088C9.19 9.90167 9.561 9.97267 9.945 10.15C10.329 10.3273 10.8527 10.203 11.02 10.1857C11.1883 10.1673 11.2593 9.66267 11.215 9.49433C11.1703 9.326 10.9053 9.574 10.7373 9.46767C10.5693 9.36167 10.339 9.49433 10.1713 9.34333C10.003 9.193 9.97633 8.83833 10.1713 8.82967C10.3657 8.82067 10.4633 8.75867 10.578 8.626C10.6933 8.493 11.1267 8.41333 11.2947 8.546C11.4623 8.679 11.7107 8.76767 11.8603 8.617C12.0107 8.46667 11.5603 8.17433 11.4623 8.09433C11.365 8.01467 11.4447 7.75767 11.3477 7.75767C11.25 7.75767 11.1703 7.80167 11.2237 7.926C11.2767 8.05 10.9407 8.27133 10.887 8.14767C10.8343 8.02333 10.746 7.78433 10.6133 7.78433C10.481 7.78433 10.304 8.387 10.295 8.48433C10.286 8.582 10.056 8.74133 9.87067 8.74133C9.68533 8.74133 9.68533 8.95433 9.78233 9.052C9.87967 9.14933 9.80867 9.53933 9.632 9.56167C9.455 9.58433 9.393 9.52167 9.36667 9.37067C9.34033 9.22033 9.16333 9.238 9.15433 8.92767C9.14533 8.61733 8.95067 8.467 8.827 8.325C8.70333 8.183 8.38467 7.76667 8.261 7.953C8.13733 8.13933 8.70333 8.538 8.85333 8.644C9.00433 8.75033 8.97767 8.98067 8.898 9.034C8.81833 9.08733 8.668 9.52167 8.57967 9.55667C8.49067 9.592 8.40633 9.42467 8.40633 9.42467C8.27367 9.37167 8.59167 9.212 8.645 9.13233C8.69767 9.05267 8.088 8.49433 7.978 8.33467C7.868 8.175 7.398 8.46733 7.186 8.36133C6.97367 8.25533 6.655 8.76 6.629 9.05233C6.602 9.345 6.257 9.42433 5.93867 9.42433C5.62067 9.42433 5.408 9.18533 5.51467 8.946C5.62067 8.70667 5.46133 8.308 5.64733 8.28133C5.833 8.255 6.363 8.28133 6.46933 7.989C6.57533 7.69667 5.965 7.43067 6.20433 7.37767C6.44267 7.32433 6.81467 6.95267 7.08 6.73967C7.34467 6.527 7.37133 6.26133 7.61 6.24267C7.84933 6.22433 7.55733 5.78233 7.76967 5.64967C7.98233 5.51667 8.035 6.12833 8.19433 6.12833C8.35367 6.12833 8.67133 6.075 8.937 6.208C9.20267 6.341 9.282 6.075 9.38833 5.729C9.49433 5.38367 9.75967 5.19733 10.29 4.93167C10.8207 4.66567 9.68033 5.01133 9.46767 4.74533C9.25533 4.47933 9.54733 3.89433 9.68033 3.48133C9.813 3.068 9.25567 3.89433 8.96367 4.32C8.67133 4.74533 9.04333 4.93133 9.01633 5.22367C8.99 5.51633 8.513 5.86167 8.513 5.86167C8.30067 5.88833 8.327 5.463 8.221 5.277C8.11467 5.091 7.92867 5.17067 7.63667 5.38333C7.34467 5.596 7.31833 4.87833 7.239 4.58567C7.16 4.29367 7.71667 3.921 7.97833 3.72233C8.23967 3.523 8.67133 2.56533 9.14933 1.82133C9.62733 1.077 10.317 1.449 10.5027 1.74167C10.689 2.03367 11.1657 1.84767 11.6173 2.37967C12.0687 2.91133 11.511 3.15033 11.0077 2.93433C10.5027 2.71833 11.1133 3.46967 11.4047 3.68233C11.6967 3.89467 11.856 3.20367 11.9623 3.04433C12.0683 2.88467 12.466 2.96467 12.7577 2.539C13.05 2.11367 13.713 2.19367 14.0917 2.24033C14.4707 2.28733 14.3763 2.00733 14.1377 1.77833C13.961 1.609 14.3223 1.75733 14.7477 1.965C17.492 3.58933 19.3333 6.579 19.3333 10ZM6.014 6.824C5.926 6.733 6.103 6.37467 6.18233 6.26833C6.26233 6.162 5.961 6.19733 5.97933 6.34833C5.997 6.49867 5.864 6.72933 5.67833 6.79133C5.49267 6.85333 5.281 6.83533 5.38667 6.667C5.49233 6.49867 5.39533 6.348 5.31567 6.18833C5.23633 6.02867 5.75767 5.93133 5.86433 5.834C5.97033 5.73667 5.69667 5.67433 5.705 5.524C5.714 5.373 5.776 5.24033 5.88133 5.22267C5.98767 5.205 6.087 5.137 6.18233 5.143C6.47467 5.161 6.38533 5.82533 6.492 6.03833C6.598 6.25067 6.899 6.508 6.87233 6.69367C6.84567 6.88 6.789 6.98633 6.57233 6.933C6.35467 6.87967 6.00633 7.20767 5.873 7.14567C5.74 7.08333 6.103 6.915 6.014 6.824V6.824ZM4.108 3.097C4.37367 3.22967 4.58533 2.989 4.77067 2.93733C4.99033 2.87667 5.11567 3.65533 4.90367 3.62867C4.69133 3.602 4.45267 4.054 4.146 4.02733C3.839 4.00067 3.975 3.78833 3.63 3.46933C3.556 3.40067 3.52567 3.33867 3.523 3.28433C3.59667 3.21333 3.67 3.142 3.74633 3.07367C3.86567 3.042 4.00733 3.04667 4.108 3.097V3.097ZM12.4087 16.4773C12.6563 16.4243 12.6087 15.953 12.8333 15.928C13.311 15.875 12.851 17.204 12.6743 17.5763C12.4973 17.9487 12.426 17.9307 12.2577 17.7003C12.0887 17.4703 12.1433 17.0977 12.2577 16.9207C12.3717 16.743 12.1607 16.5307 12.4087 16.4773" />
            </svg>
            <span>{{ region.name}}</span>
          </span>
          <span>{{ region.total }}</span>
        </button>
      </div>
      <span class="flex items-center space-x-5">
        <button
          type="button"
          class="border border-googlegrey rounded-full bg-white h-10 w-10 flex justify-center items-center hover:bg-appblue hover:text-white hover:border-appblue"
          :class="[isList ? 'bg-appblue text-white border-appblue' : 'bg-white text-variant3']"
          @click="toggleClass()"
        >
          <svg
            class="fill-current"
            width="20"
            height="20"
            viewBox="0 0 20 20"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path fill-rule="evenodd" clip-rule="evenodd" d="M2.5 3.125C2.33424 3.125 2.17527 3.19085 2.05806 3.30806C1.94085 3.42527 1.875 3.58424 1.875 3.75V5C1.875 5.16576 1.94085 5.32473 2.05806 5.44194C2.17527 5.55915 2.33424 5.625 2.5 5.625H3.75C3.91576 5.625 4.07473 5.55915 4.19194 5.44194C4.30915 5.32473 4.375 5.16576 4.375 5V3.75C4.375 3.58424 4.30915 3.42527 4.19194 3.30806C4.07473 3.19085 3.91576 3.125 3.75 3.125H2.5ZM3.75 3.75H2.5V5H3.75V3.75Z" />
            <path d="M6.25 4.375C6.25 4.20924 6.31585 4.05027 6.43306 3.93306C6.55027 3.81585 6.70924 3.75 6.875 3.75H18.125C18.2908 3.75 18.4497 3.81585 18.5669 3.93306C18.6842 4.05027 18.75 4.20924 18.75 4.375C18.75 4.54076 18.6842 4.69973 18.5669 4.81694C18.4497 4.93415 18.2908 5 18.125 5H6.875C6.70924 5 6.55027 4.93415 6.43306 4.81694C6.31585 4.69973 6.25 4.54076 6.25 4.375ZM6.875 8.75C6.70924 8.75 6.55027 8.81585 6.43306 8.93306C6.31585 9.05027 6.25 9.20924 6.25 9.375C6.25 9.54076 6.31585 9.69973 6.43306 9.81694C6.55027 9.93415 6.70924 10 6.875 10H18.125C18.2908 10 18.4497 9.93415 18.5669 9.81694C18.6842 9.69973 18.75 9.54076 18.75 9.375C18.75 9.20924 18.6842 9.05027 18.5669 8.93306C18.4497 8.81585 18.2908 8.75 18.125 8.75H6.875ZM6.875 13.75C6.70924 13.75 6.55027 13.8158 6.43306 13.9331C6.31585 14.0503 6.25 14.2092 6.25 14.375C6.25 14.5408 6.31585 14.6997 6.43306 14.8169C6.55027 14.9342 6.70924 15 6.875 15H18.125C18.2908 15 18.4497 14.9342 18.5669 14.8169C18.6842 14.6997 18.75 14.5408 18.75 14.375C18.75 14.2092 18.6842 14.0503 18.5669 13.9331C18.4497 13.8158 18.2908 13.75 18.125 13.75H6.875Z" />
            <path fill-rule="evenodd" clip-rule="evenodd" d="M1.875 8.75C1.875 8.58424 1.94085 8.42527 2.05806 8.30806C2.17527 8.19085 2.33424 8.125 2.5 8.125H3.75C3.91576 8.125 4.07473 8.19085 4.19194 8.30806C4.30915 8.42527 4.375 8.58424 4.375 8.75V10C4.375 10.1658 4.30915 10.3247 4.19194 10.4419C4.07473 10.5592 3.91576 10.625 3.75 10.625H2.5C2.33424 10.625 2.17527 10.5592 2.05806 10.4419C1.94085 10.3247 1.875 10.1658 1.875 10V8.75ZM2.5 8.75H3.75V10H2.5V8.75ZM2.5 13.125C2.33424 13.125 2.17527 13.1908 2.05806 13.3081C1.94085 13.4253 1.875 13.5842 1.875 13.75V15C1.875 15.1658 1.94085 15.3247 2.05806 15.4419C2.17527 15.5592 2.33424 15.625 2.5 15.625H3.75C3.91576 15.625 4.07473 15.5592 4.19194 15.4419C4.30915 15.3247 4.375 15.1658 4.375 15V13.75C4.375 13.5842 4.30915 13.4253 4.19194 13.3081C4.07473 13.1908 3.91576 13.125 3.75 13.125H2.5ZM3.75 13.75H2.5V15H3.75V13.75Z" />
          </svg>
        </button>
        <button
          type="button"
          class="border border-googlegrey bg-white rounded-full h-10 w-10 flex justify-center items-center hover:bg-appblue hover:text-white hover:border-appblue"
          :class="[isList ? 'bg-white text-variant3' : 'bg-appblue text-white border-appblue']"
          @click="isList = !isList"
        >
          <svg
            class="fill-current"
            width="20"
            height="20"
            viewBox="0 0 20 20"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path d="M7.5 2.5H3.75C3.41848 2.5 3.10054 2.6317 2.86612 2.86612C2.6317 3.10054 2.5 3.41848 2.5 3.75V7.5C2.5 7.83152 2.6317 8.14946 2.86612 8.38388C3.10054 8.6183 3.41848 8.75 3.75 8.75H7.5C7.83152 8.75 8.14946 8.6183 8.38388 8.38388C8.6183 8.14946 8.75 7.83152 8.75 7.5V3.75C8.75 3.41848 8.6183 3.10054 8.38388 2.86612C8.14946 2.6317 7.83152 2.5 7.5 2.5V2.5ZM7.5 7.5H3.75V3.75H7.5V7.5Z" />
            <path d="M16.25 2.5H12.5C12.1685 2.5 11.8505 2.6317 11.6161 2.86612C11.3817 3.10054 11.25 3.41848 11.25 3.75V7.5C11.25 7.83152 11.3817 8.14946 11.6161 8.38388C11.8505 8.6183 12.1685 8.75 12.5 8.75H16.25C16.5815 8.75 16.8995 8.6183 17.1339 8.38388C17.3683 8.14946 17.5 7.83152 17.5 7.5V3.75C17.5 3.41848 17.3683 3.10054 17.1339 2.86612C16.8995 2.6317 16.5815 2.5 16.25 2.5V2.5ZM16.25 7.5H12.5V3.75H16.25V7.5Z" />
            <path d="M7.5 11.25H3.75C3.41848 11.25 3.10054 11.3817 2.86612 11.6161C2.6317 11.8505 2.5 12.1685 2.5 12.5V16.25C2.5 16.5815 2.6317 16.8995 2.86612 17.1339C3.10054 17.3683 3.41848 17.5 3.75 17.5H7.5C7.83152 17.5 8.14946 17.3683 8.38388 17.1339C8.6183 16.8995 8.75 16.5815 8.75 16.25V12.5C8.75 12.1685 8.6183 11.8505 8.38388 11.6161C8.14946 11.3817 7.83152 11.25 7.5 11.25ZM7.5 16.25H3.75V12.5H7.5V16.25Z" />
            <path d="M16.25 11.25H12.5C12.1685 11.25 11.8505 11.3817 11.6161 11.6161C11.3817 11.8505 11.25 12.1685 11.25 12.5V16.25C11.25 16.5815 11.3817 16.8995 11.6161 17.1339C11.8505 17.3683 12.1685 17.5 12.5 17.5H16.25C16.5815 17.5 16.8995 17.3683 17.1339 17.1339C17.3683 16.8995 17.5 16.5815 17.5 16.25V12.5C17.5 12.1685 17.3683 11.8505 17.1339 11.6161C16.8995 11.3817 16.5815 11.25 16.25 11.25ZM16.25 16.25H12.5V12.5H16.25V16.25Z" />
          </svg>
        </button>
      </span>
    </div>
    <div v-if="!isList">
      <GridDisplay :countries="countries" />
    </div>
    <div v-if="isList">
      <ListDisplay :countries="countries" />
    </div>
  </div>
</template>

<script>
export default {
  props: {
    regions: {
      type: Array,
      default: () => [
        {
          name: 'All',
          total: 250,
        },
        {
          name: 'Africa',
          total: 60,
        },
        {
          name: 'Asia',
          total: 50,
        },
        {
          name: 'Europe',
          total: 53,
        },
        {
          name: 'Oceania',
          total: 27,
        },
        {
          name: 'Americas',
          total: 57,
        },
      ],
    },
  },
  data() {
    return {
      isList: true,
      isFilter: false,
    }
  },
  computed: {
    countries() {
      return this.$store.state.filteredCountries
    },
  },
  methods: {
    // eslint-disable-next-line no-unused-vars
    toggleClass(event) {
      this.isList = !this.isList
    },
  },
}
</script>
